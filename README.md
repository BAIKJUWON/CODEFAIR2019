# Home Keeper 프로젝트 설명

**Home Keeper** 프로젝트는 ESP8266 WiFi 모듈을 이용하여 Firebase 데이터베이스와 통신하는 IoT 기반 스마트 홈 시스템입니다. 이 시스템은 사용자가 특정 방의 상태를 실시간으로 모니터링하고 Firebase에 데이터를 업데이트할 수 있도록 설계되었습니다.

## 주요 기능

1. **WiFi 연결**: ESP8266 모듈을 사용하여 사용자가 지정한 WiFi 네트워크에 연결합니다. 연결이 성공적으로 이루어지면 모듈은 로컬 IP 주소를 출력합니다.

2. **Firebase와의 통신**: 시스템은 Firebase Realtime Database와 통합되어, 특정 방의 상태를 'open' 또는 'close'로 업데이트합니다. 방의 상태는 센서의 입력값에 따라 결정됩니다.

3. **실시간 데이터 전송**: 각 방의 상태가 변경될 때마다 시스템은 Firebase에 실시간으로 데이터를 전송합니다. 데이터 전송이 실패할 경우, 오류 메시지를 출력하여 문제를 즉시 파악할 수 있습니다.

4. **시간 및 날짜 기록**: 각 상태 변화에 대한 타임스탬프를 기록하여 Firebase에 저장합니다. 이를 통해 사용자는 특정 시간에 방의 상태가 어떻게 변화했는지를 확인할 수 있습니다.

5. **다중 타이머 제어**: SimpleTimer 라이브러리를 사용하여 여러 타이머를 동시에 제어합니다. 각 타이머는 주기적으로 센서의 입력을 확인하고 Firebase에 데이터를 업데이트하는 함수들을 호출합니다.

## 사용된 기술 및 라이브러리

- **ArduinoJson**: JSON 데이터를 파싱하고 생성하는 데 사용되는 경량의 JSON 라이브러리입니다.
- **SimpleTimer**: 여러 개의 타이머를 설정하고 제어할 수 있도록 도와주는 라이브러리입니다.
- **ESP8266WiFi**: ESP8266 모듈을 통해 WiFi에 연결하고 통신하는 데 사용되는 라이브러리입니다.
- **FirebaseArduino**: Firebase Realtime Database와 쉽게 통합할 수 있도록 도와주는 라이브러리입니다.

## 하드웨어 구성 요소

- **ESP8266 WiFi 모듈**: WiFi 네트워크에 연결하고 인터넷을 통해 Firebase와 통신하는 역할을 합니다.
- **센서 (D4, D5, D6 핀 연결)**: 각 방의 상태를 감지하고 시스템에 입력값을 제공합니다. 입력값은 방의 문이 열렸는지 닫혔는지를 나타냅니다.

## 설정 및 초기화 과정

1. **WiFi 설정**: `WiFi.begin()` 함수를 사용하여 WiFi에 연결을 시도합니다. 연결이 성공하면 IP 주소가 출력됩니다.
   
2. **Firebase 초기화**: `Firebase.begin()` 함수를 사용하여 Firebase와의 연결을 설정합니다. 이때 Firebase 호스트 주소와 인증 키가 필요합니다.

3. **핀 모드 설정**: 각 핀에 대해 `pinMode()` 함수를 사용하여 입력 모드로 설정합니다. 이 핀들은 각각의 방의 센서와 연결되어 있습니다.

4. **타이머 설정**: `SimpleTimer` 라이브러리를 사용하여 각 방의 상태를 주기적으로 확인하는 타이머를 설정합니다. 각 타이머는 1초마다 센서 상태를 확인하고 필요한 경우 Firebase에 데이터를 전송합니다.

## 데이터 처리 및 전송

- **상태 전송**: 각 방의 상태가 변경될 때마다 `sendDatas()` 함수가 호출되어 Firebase에 데이터를 전송합니다.
- **시간 전송**: 상태 변화가 감지되면 `sendTime()` 함수가 호출되어 변화가 발생한 정확한 시간 정보를 Firebase에 저장합니다.
- **날짜 및 시간 계산**: `get_date_time()` 함수는 현재 날짜와 시간을 계산하여 타임스탬프 형식으로 변환합니다. 이를 통해 시스템은 정확한 시간 정보를 Firebase에 저장할 수 있습니다.

## 시스템 확장 가능성

본 프로젝트는 추가적인 센서 입력을 지원하도록 쉽게 확장할 수 있으며, 다른 Firebase 데이터베이스나 클라우드 서비스와의 통합도 가능합니다. 이를 통해 다양한 스마트 홈 시나리오에 맞게 시스템을 유연하게 조정할 수 있습니다.


<br>
<img src = "https://github.com/BAIKJUWON/codefair2019/blob/main/images/images.png?raw=True">
<br>

https://www.youtube.com/watch?v=Tvlu1JkTChA
